<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
   xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <link href="../static/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
   <header th:replace="~{fragments/header::header}">
   </header>
   <div class="flex-center">
      <div class="flex-column-center form-full-size gradient-fill-blue form-container margin-all-20">
         <div class="flex-center margin-bottom-20">–°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤</div>
         <div>
            <button type="button" class="margin-bottom-10" onclick="addOrder()">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
         </div>
         <div class="table-big">
            <table>
               <tr class="table-header">
                  <td th:replace="~{fragments/sortedColumn::sortedColumn('idOrders', 'Id')}">
                     <span>Id</span>
                  </td>
                  <td th:replace="~{fragments/sortedColumn::sortedColumn('name', '–ù–∞–∑–≤–∞–Ω–∏–µ')}">
                     <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
                  </td>
                  <td th:replace="~{fragments/sortedColumn::sortedColumn('client', '–ö–ª–∏–µ–Ω—Ç')}">
                     <span>–ö–ª–∏–µ–Ω—Ç</span>
                  </td>
                  <td>–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</td>
                  <td>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</td>
                  <td>–£–¥–∞–ª–∏—Ç—å</td>
               </tr>
               <tr th:each="order : ${orders}">
                  <td th:text="${order.idOrders}">1</td>
                  <td th:id="'order'+${order.idOrders}+'name'" th:text="${order.name}">Name</td>
                  <td th:id="'order'+${order.idOrders}+'client'" th:text="${order.client.name}+' ('+${order.client.idClients}+')'">Customer</td>
                  <td class="hidden" th:id="'order'+${order.idOrders}+'description'" th:text="${order.description}">Desc</td>
                  <td><button onclick="createProject(1)" th:onclick="'createProject('+${order.idOrders}+')'">üìà</button></td>
                  <td><button onclick="editOrder(1)" th:onclick="'editOrder('+${order.idOrders}+')'">‚úé</button></td>
                  <td><button onclick="deleteOrder(1)" th:onclick="'deleteOrder('+${order.idOrders}+')'">‚ùå</button></td>
               </tr>
            </table>
         </div>
         <div th:replace="~{fragments/pagination::pagination(${orders}, 'orders')}"></div>
      </div>
   </div>
   <div id="addEditOrderFormContainer" class="form-hidden-container flex-center-block hidden">
      <div class="flex-column-center form-450 gradient-fill-blue form-container margin-all-20">
         <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑</h2>
         <form id="addEditOrderForm" th:action="@{/orders}" method="post" class="form-border">
            <input type="hidden" value="add" name="mode" id="addEditModeField"/>
            <input id="clientIdInput" type="hidden" name="client" value="-1"/>
            <input type="hidden" value="0" name="idOrders" id="addEditIdOrdersField"/>
            <div class="form-field margin-top-20">
               <label class="form-label" for="addEditName"> –ù–∞–∑–≤–∞–Ω–∏–µ: 
               </label>
               <input class="form-input-300" type="text" name="name" id="addEditName"/> 
            </div>
            <div class="form-field">
               <label class="form-label" for="addEditClient"> –ö–ª–∏–µ–Ω—Ç: 
               </label>
               <input class="form-input-300" type="text" id="addEditClient" list="clientList"/> 
               <datalist id="clientList">
                <option th:each="client : ${clients}" th:value="${client.name}+' ('+${client.idClients}+')'" th:data-clientid="${client.idClients}" value="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤ (Flexis)" data-clientid="1">
             </datalist>
            </div>
            <div class="form-field">
                <label class="form-label" for="addEditDescription"> –û–ø–∏—Å–∞–Ω–∏–µ:
                </label>
                <textarea class="form-input-300" name="description" id="addEditDescription">
                </textarea>
             </div>
            <div class="flex-center">
               <div class="form-field">
                  <input id="addEditSubmit" type="button" value="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" onclick="submitAddEditOrder()"/>
               </div>
               <div class="form-field">
                  <button type="button" name="cancelEdit" onclick="cancelAddEditOrder()">–û—Ç–º–µ–Ω–∞</button>
               </div>
            </div>
         </form>
      </div>
   </div>
   <div id="deleteOrderFormContainer" class="form-hidden-container flex-center-block hidden">
      <div class="flex-column-center gradient-fill-blue form-container margin-all-20">
         <form th:action="@{/orders}" method="post" class="form-border">
            <div>–ó–∞–∫–∞–∑ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω. –í—ã —É–≤–µ—Ä–µ–Ω—ã?</div>
            <input type="hidden" value="delete" name="mode"/>
            <input type="hidden" value="0" name="idOrders" id="deleteIdOrdersField"/>
            <div class="flex-center">
               <div class="form-field">
                  <input type="submit" value="–î–∞" />
               </div>
               <div class="form-field">
                  <button type="button" name="cancelEdit" onclick="cancelDeleteOrder()">–û—Ç–º–µ–Ω–∞</button>
               </div>
            </div>
         </form>
      </div>
   </div>
   <div id="addProjectFormContainer" class="form-hidden-container flex-center-block hidden">
      <div class="flex-column-center form-450 gradient-fill-blue form-container margin-all-20">
         <h2>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
         <form th:action="@{/project}" method="post" class="form-border">
            <input type="hidden" value="add" name="mode"/>
            <input id="orderIdProjectInput" type="hidden" name="order" value="-1"/>
            <div class="form-field margin-top-20">
               <label class="form-label" for="addProjectName"> –ù–∞–∑–≤–∞–Ω–∏–µ: 
               </label>
               <input class="form-input-300" type="text" name="name" id="addProjectName"/> 
            </div>
            <div class="form-field">
                <label class="form-label" for="addStartDate"> –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:
                </label>
                <input type="date" class="form-input-300" name="startDate" id="addStartDate"/>
             </div>
             <div class="form-field">
               <label class="form-label" for="addEndEstDate"> –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:
               </label>
               <input type="date" class="form-input-300" name="estimateEndDate" id="addEndEstDate"/>
            </div>
            <div class="form-field">
               <label class="form-label" for="add–°ost"> –°—Ç–æ–∏–º–æ—Å—Ç—å: <!-- TODO Validation -->
               </label>
               <input type="text" class="form-input-300" name="cost" id="add–°ost"/>
            </div>
            <div class="flex-center">
               <div class="form-field">
                  <input type="submit" value="–î–æ–±–∞–≤–∏—Ç—å"/>
               </div>
               <div class="form-field">
                  <button type="button" name="cancelEdit" onclick="cancelAddProject()">–û—Ç–º–µ–Ω–∞</button>
               </div>
            </div>
         </form>
      </div>
   </div>

   <script src="../static/scripts/formUtilities.js"></script>
   <script src="../static/scripts/orders.js"></script>
</body>
</html>